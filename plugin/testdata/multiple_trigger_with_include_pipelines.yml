kind: pipeline
name: networkredux/staging

node:
  datacenter: nr-staging

concurrency:
  limit: 1

steps:

- name: inspect
  image: meltwaterfoundation/drone-git
  commands:
  - _scripts/inspect.sh networkredux/staging

- name: verify
  image: meltwaterfoundation/drone-lighter:0.21.0
  commands:
  - _scripts/verify.sh
  when:
    event:
    - pull_request
    - push

- name: deploy
  image: meltwaterfoundation/drone-lighter:0.21.0
  commands:
  - _scripts/deploy.sh networkredux/staging
  when:
    event:
    - push

trigger:
  paths:
    include:
    - networkredux/staging/**
  branch:
  - master

---
kind: pipeline
name: basefarm/production

node:
  datacenter: bf-production

concurrency:
  limit: 1

steps:

- name: inspect
  image: meltwaterfoundation/drone-git
  commands:
  - _scripts/inspect.sh basefarm/production

- name: verify
  image: meltwaterfoundation/drone-lighter:0.21.0
  commands:
  - _scripts/verify.sh
  when:
    event:
    - pull_request
    - push

- name: deploy
  image: meltwaterfoundation/drone-lighter:0.21.0
  commands:
  - _scripts/deploy.sh basefarm/production
  when:
    event:
    - push

trigger:
  paths:
    include:
    - basefarm/production/**
  branch:
  - master

...
